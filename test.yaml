---
- hosts: Mainrouter
  connection: network_cli

  vars:
    ansible_connection: ansible.netcommon.network_cli
    ansible_network_os: community.network.routeros
    ansible_user: noc
    ansible_password: hamed225
    ansible_become: true
    ansible_become_method: enable
    ansible_become_password: !vault...
    ansible_ssh_common_args: '-o ProxyCommand="ssh -W %h:%p -q bastion01"'

  tasks:
    - name: Display resource statistics (routeros)
      community.network.routeros_command:
        commands: /system resource print
      register: routeros_resources
      when: ansible_network_os == 'community.network.routeros'
